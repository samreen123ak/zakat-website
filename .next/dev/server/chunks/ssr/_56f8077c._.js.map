{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sam_Bhatti/Desktop/Rahmah%20Exchange/Frontend/lib/auth-utils.ts"],"sourcesContent":["export const AUTH_TOKEN_KEY = \"rahmah_admin_token\"\n\n// Save token in cookies (for middleware)\nexport function setAuthToken(token: string): void {\n  if (typeof window === \"undefined\") return\n  // Cookie expires in 1 hour\n  document.cookie = `${AUTH_TOKEN_KEY}=${token}; path=/; max-age=3600; secure; samesite=lax`\n}\n\n// Get token from cookies (for client-side checks)\nexport function getAuthToken(): string | null {\n  if (typeof window === \"undefined\") return null\n  const match = document.cookie.match(new RegExp('(^| )' + AUTH_TOKEN_KEY + '=([^;]+)'))\n  return match ? match[2] : null\n}\n\n// Remove token from cookies\nexport function removeAuthToken(): void {\n  if (typeof window === \"undefined\") return\n  document.cookie = `${AUTH_TOKEN_KEY}=; path=/; max-age=0`\n}\n\n// Client-side helper\nexport function isAuthenticated(): boolean {\n  return !!getAuthToken()\n}\n\n// Keep API base URL as is\nexport const API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_URL || \"https://rahmah-exchange-backend-production.up.railway.app\"\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,MAAM,iBAAiB;AAGvB,SAAS,aAAa,KAAa;IACxC,wCAAmC;;;AAGrC;AAGO,SAAS;IACd,wCAAmC,OAAO;;;IAC1C,MAAM;AAER;AAGO,SAAS;IACd,wCAAmC;;;AAErC;AAGO,SAAS;IACd,OAAO,CAAC,CAAC;AACX;AAGO,MAAM,eACX,iGAAmC","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sam_Bhatti/Desktop/Rahmah%20Exchange/Frontend/app/staff/cases/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { Heart, LogOut } from \"lucide-react\"\nimport { useRouter } from \"next/navigation\"\nimport { getAuthToken, removeAuthToken, API_BASE_URL } from \"@/lib/auth-utils\"\n\ninterface Case {\n  _id: string\n  firstName: string\n  lastName: string\n  requestType: string\n  amountRequested: number | null\n  status: string\n  createdAt: string\n}\n\ninterface ApiResponse {\n  items: Case[]\n  total: number\n  page: number\n  limit: number\n}\n\nexport default function CasesPage() {\n  const [cases, setCases] = useState<Case[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const router = useRouter()\n\n  useEffect(() => {\n    const token = getAuthToken()\n    if (!token) {\n      router.push(\"/staff/login\")\n      return\n    }\n  }, [router])\n\n  useEffect(() => {\n    const fetchCases = async () => {\n      try {\n        const res = await fetch(`${API_BASE_URL}/api/zakatApplicants`, {\n          method: \"GET\",\n          headers: { \"Content-Type\": \"application/json\" },\n          mode: \"cors\",\n          cache: \"no-store\",\n        })\n\n        if (!res.ok) {\n          throw new Error(`API error: ${res.status}`)\n        }\n\n        const result: ApiResponse = await res.json()\n        const caseData = Array.isArray(result.items) ? result.items : []\n        setCases(caseData)\n        setError(null)\n      } catch (error) {\n        console.error(\"Error fetching cases:\", error)\n        setError(\"Failed to load cases\")\n        setCases([])\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchCases()\n  }, [])\n\n  const handleLogout = () => {\n    removeAuthToken()\n    router.push(\"/staff/login\")\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100\">\n      {/* Header */}\n      <header className=\"bg-white border-b border-gray-200 px-8 py-6 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-teal-600 to-cyan-600 rounded-full flex items-center justify-center shadow-lg\">\n              <Heart className=\"w-6 h-6 text-white fill-white\" />\n            </div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Case Management</h1>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <Link href=\"/staff/dashboard\" className=\"text-gray-600 hover:text-gray-900 font-medium transition\">\n              Dashboard\n            </Link>\n            <button\n              onClick={handleLogout}\n              className=\"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-red-50 hover:text-red-600 rounded-lg transition\"\n            >\n              <LogOut className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-8 py-12\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">All Cases</h2>\n          <p className=\"text-gray-600\">Manage and review all applicants</p>\n        </div>\n\n        {loading && <div className=\"bg-white rounded-lg p-12 text-center text-gray-600\">Loading cases...</div>}\n\n        {error && <div className=\"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg mb-6\">{error}</div>}\n\n        {!loading && !error && cases.length === 0 && (\n          <div className=\"bg-white rounded-lg p-12 text-center text-gray-600\">No cases found</div>\n        )}\n\n        {/* Cases Grid */}\n        <div className=\"space-y-4\">\n          {cases.map((caseItem) => (\n            <div\n              key={caseItem._id}\n              className=\"bg-white rounded-lg p-6 shadow-sm hover:shadow-md border border-gray-200 transition\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-bold text-gray-900\">\n                    {caseItem.firstName} {caseItem.lastName}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    {caseItem.requestType} · ${caseItem.amountRequested || \"N/A\"}\n                  </p>\n                </div>\n\n                <span\n                  className={`px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap ml-4 ${\n                    caseItem.status === \"Pending\"\n                      ? \"bg-yellow-100 text-yellow-800\"\n                      : caseItem.status === \"Approved\"\n                        ? \"bg-green-100 text-green-800\"\n                        : \"bg-red-100 text-red-800\"\n                  }`}\n                >\n                  {caseItem.status}\n                </span>\n              </div>\n\n              <div className=\"grid grid-cols-4 gap-6 text-sm pt-4 border-t border-gray-100\">\n                <div>\n                  <p className=\"text-gray-600\">Case ID</p>\n                  <p className=\"font-mono text-xs text-gray-900 mt-1\">{caseItem._id.slice(0, 8)}...</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-600\">Submitted</p>\n                  <p className=\"text-gray-900 font-medium mt-1\">{new Date(caseItem.createdAt).toLocaleDateString()}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-600\">Amount</p>\n                  <p className=\"text-gray-900 font-medium mt-1\">${caseItem.amountRequested || \"—\"}</p>\n                </div>\n                <div className=\"text-right\">\n                  <Link href={`/staff/cases/${caseItem._id}`}>\n                    <button className=\"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-medium\">\n                      Review\n                    </button>\n                  </Link>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}